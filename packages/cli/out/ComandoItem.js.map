{"version":3,"sources":["../src/ComandoItem.ts"],"sourcesContent":["import { falseador, util } from 'falseador-lib';\nimport { Comando } from './Comando';\nimport { validaOpçãoNúmeroInteiroPositivo } from './Utilitários';\n\nconst { Exceção } = util;\n\nexport class ComandoItem extends Comando {\n  public constructor() {\n    super('item');\n\n    super\n      .description('Sorteia e embaralha itens.')\n      .alias('i')\n      .addCommand(this.subcomandoSorteio(), { isDefault: true })\n      .addCommand(this.subcomandoEmbaralhar());\n  }\n\n  private subcomandoSorteio() {\n    return new Comando('sortear')\n      .description(\n        'Sorteia item aleatório dentre os especificados em <itensConcatenados>. Itens vazios são ignorados.',\n      )\n      .alias('s')\n      .argument('itensConcanetados', 'itens divididos por , (vírgula)')\n      .option(\n        '-q, --sorteios <número>',\n        'quantidade de itens únicos sorteados.',\n        validaOpçãoNúmeroInteiroPositivo,\n        1,\n      )\n      .option(\n        '-s, --separador <caracteres>',\n        'separador dos itens sorteados.',\n        '\\n',\n      )\n      .action(\n        (\n          itensConcanetados: string,\n          opções: { sorteios: number; separador: string },\n        ) => {\n          const itens = itensConcanetados\n            .split(',')\n            .filter((item) => item !== '');\n\n          if (opções.sorteios >= itens.length)\n            throw new Exceção(\n              'Quantidade de sorteios deve ser menor que a de itens.',\n            );\n\n          let i = 0;\n          let resultado = '';\n          while (i++ < opções.sorteios - 1) {\n            const item = falseador.tipo.entre(itens);\n            const índice = itens.indexOf(item);\n            itens.splice(índice, 1);\n            resultado += `${item}${opções.separador}`;\n          }\n\n          resultado += `${falseador.tipo.entre(itens)}`;\n\n          process.stdout.write(resultado);\n        },\n      );\n  }\n\n  private subcomandoEmbaralhar() {\n    return new Comando('embaralhar')\n      .description('embaralha itens.')\n      .alias('e')\n      .argument('itensConcanetados', 'itens divididos por , (vírgula).')\n      .option(\n        '-s, --separador <caracteres>',\n        'separador dos itens sorteados; se sequência, deve estar envolta por aspas.',\n        '\\n',\n      )\n      .action((itensConcanetados: string, opções: { separador: string }) => {\n        const itens = itensConcanetados\n          .split(',')\n          .filter((item) => item !== '');\n        const embaralhada = falseador.tipo.cópiaEmbaralhada(itens);\n        const resultado = embaralhada.join(opções.separador);\n\n        process.stdout.write(resultado);\n      });\n  }\n}\n"],"names":["falseador","util","Comando","validaOpçãoNúmeroInteiroPositivo","Exceção","ComandoItem","description","alias","addCommand","subcomandoSorteio","isDefault","subcomandoEmbaralhar","argument","option","action","itensConcanetados","opções","itens","split","filter","item","sorteios","length","i","resultado","tipo","entre","índice","indexOf","splice","separador","process","stdout","write","embaralhada","cópiaEmbaralhada","join"],"mappings":"AAAA,OAASA,SAAS,CAAEC,IAAI,KAAQ,eAAgB,AAChD,QAASC,OAAO,KAAQ,cAAY,AACpC,QAASC,gCAAgC,KAAQ,kBAAgB,CAEjE,KAAM,CAAEC,OAAO,CAAE,CAAGH,IAEpB,QAAO,MAAMI,oBAAoBH,QAC/B,aAAqB,CACnB,KAAK,CAAC,QAEN,KAAK,CACFI,YAAY,8BACZC,KAAK,CAAC,KACNC,UAAU,CAAC,IAAI,CAACC,iBAAiB,GAAI,CAAEC,UAAW,IAAK,GACvDF,UAAU,CAAC,IAAI,CAACG,oBAAoB,GACzC,CAEA,AAAQF,mBAAoB,CAC1B,OAAO,IAAIP,QAAQ,WAChBI,WAAW,CACV,sGAEDC,KAAK,CAAC,KACNK,QAAQ,CAAC,oBAAqB,mCAC9BC,MAAM,CACL,0BACA,wCACAV,iCACA,GAEDU,MAAM,CACL,+BACA,iCACA,MAEDC,MAAM,CACL,CACEC,kBACAC,UAEA,MAAMC,MAAQF,kBACXG,KAAK,CAAC,KACNC,MAAM,CAAC,AAACC,MAASA,OAAS,IAE7B,GAAIJ,OAAOK,QAAQ,EAAIJ,MAAMK,MAAM,CACjC,MAAM,IAAIlB,QACR,yDAGJ,IAAImB,EAAI,EACR,IAAIC,UAAY,GAChB,MAAOD,IAAMP,OAAOK,QAAQ,CAAG,EAAG,CAChC,MAAMD,KAAOpB,UAAUyB,IAAI,CAACC,KAAK,CAACT,OAClC,MAAMU,OAASV,MAAMW,OAAO,CAACR,MAC7BH,MAAMY,MAAM,CAACF,OAAQ,GACrBH,WAAa,CAAC,EAAEJ,KAAK,EAAEJ,OAAOc,SAAS,CAAC,CAAC,AAC3C,CAEAN,WAAa,CAAC,EAAExB,UAAUyB,IAAI,CAACC,KAAK,CAACT,OAAO,CAAC,CAE7Cc,QAAQC,MAAM,CAACC,KAAK,CAACT,UACvB,EAEN,CAEA,AAAQb,sBAAuB,CAC7B,OAAO,IAAIT,QAAQ,cAChBI,WAAW,CAAC,oBACZC,KAAK,CAAC,KACNK,QAAQ,CAAC,oBAAqB,oCAC9BC,MAAM,CACL,+BACA,6EACA,MAEDC,MAAM,CAAC,CAACC,kBAA2BC,UAClC,MAAMC,MAAQF,kBACXG,KAAK,CAAC,KACNC,MAAM,CAAC,AAACC,MAASA,OAAS,IAC7B,MAAMc,YAAclC,UAAUyB,IAAI,CAACU,gBAAgB,CAAClB,OACpD,MAAMO,UAAYU,YAAYE,IAAI,CAACpB,OAAOc,SAAS,EAEnDC,QAAQC,MAAM,CAACC,KAAK,CAACT,UACvB,EACJ,CACF"}